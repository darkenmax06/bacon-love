---
export const prerender = false;

import AdminLayout from '../../components/admin/AdminLayout.astro';
import AppointmentsTab from '../../components/admin/AppointmentsTab.astro';
import SettingsTab from '../../components/admin/SettingsTab.astro';
import HelpTab from '../../components/admin/HelpTab.astro';
---

<AdminLayout title="Dashboard - Bacon Love Admin" variant="dashboard">
  <div class="dashboard-container">
    <div class="tab-content active" id="appointments-tab">
      <AppointmentsTab />
    </div>
    <div class="tab-content" id="settings-tab">
      <SettingsTab />
    </div>
    <div class="tab-content" id="help-tab">
      <HelpTab />
    </div>
  </div>
</AdminLayout>

<script>
async function checkAuth() {
  try {
    const response = await fetch('/api/auth/me');
    if (!response.ok) {
      window.location.href = '/admin/login';
    }
  } catch (error) {
    window.location.href = '/admin/login';
  }
}
checkAuth();
</script>

<style>
.dashboard-container {
  max-width: 1200px;
  margin: 0 auto;
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
}
</style>
